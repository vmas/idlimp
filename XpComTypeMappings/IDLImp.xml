<?xml version="1.0" encoding="utf-8" ?>
<IDLConversions xmlns="http://dummy.sil.org/IDLConversions.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ParamTypeConversion>
    <Attribute>~out</Attribute>
    <Match>(^|\s+)nsIIDPtr</Match>
    <Replace>System.Guid</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Attribute>~out</Attribute>
    <Match>(^|\s+)nsIIDRef</Match>
    <Replace>ref System.Guid</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Attribute>~out</Attribute>
    <Match>(^|\s+)nsIID</Match>
    <Replace>System.Guid</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Attribute>retval</Attribute>
    <Match>(^|\s+)(ns)?(QIResult)</Match>
    <Replace>System.Object</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>    
    <Match>(^|\s+)(ns)?(QIResult)</Match>
    <Replace>System.Object</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(voidPtr)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>    
    <Match>(^|\s+)(void)</Match>
    <Replace>System.Void</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>unsigned long long</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>long long</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>unsigned long</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>  
  <ParamTypeConversion>
    <Match>(^|\s+)PRUint8</Match>
    <Replace>System.Byte</Replace>
  </ParamTypeConversion>  
  <ParamTypeConversion>
    <Match>(^|\s+)PRUint16Ref</Match>
    <Replace>ref System.UInt16</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)PRUint16</Match>
    <Replace>System.UInt16</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)PRInt16</Match>
    <Replace>System.Int16</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)PRUint64</Match>
    <Replace>System.UInt64</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)PRInt64</Match>
    <Replace>System.Int64</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>PRTime</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>PRThread</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>PRNetAddrPtr</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>PRFileDescStar</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>OSType</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>octet(Ptr)*</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>  
  <ParamTypeConversion>
    <Match>unsigned short</Match>
    <Replace>System.UInt16</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(short)[*\s]*</Match>
    <Replace>System.Int16</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>    
    <Match>(^|\s+)(long)</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>PRInt32</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>PRUint32</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>unsigned int</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(int)</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>unsigned</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)boolean</Match>
    <Replace>System.Boolean</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)PRBool</Match>
    <Replace>System.Boolean</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(float)[*\s]*</Match>
    <Replace>System.Double</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(double)[*\s]*</Match>
    <Replace>System.Double</Replace>
  </ParamTypeConversion>  
  <ParamTypeConversion>
    <NewAttribute>MarshalAs</NewAttribute>
    <NewAttrValue>UnmanagedType.LPWStr</NewAttrValue>
    <Match>(^|\s+)(PRUnichar)[\s]*[*]+[\s*]*</Match>
    <Replace>System.String</Replace>
  </ParamTypeConversion>
  <!-- PRUniChar (no *) looks like it should be marshaled as a string as well -->
  <ParamTypeConversion>
    <NewAttribute>MarshalAs</NewAttribute>
    <NewAttrValue>UnmanagedType.LPWStr</NewAttrValue>
    <Match>(^|\s+)(PRUnichar)</Match>
    <Replace>System.String</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>    
    <Match>(^|\s+)(PRUniChar)</Match>
    <Replace>System.Char</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs</NewAttribute>
    <NewAttrValue>UnmanagedType.CustomMarshaler, MarshalType = "Skybound.Gecko.XpCom.WStringMarshaler"</NewAttrValue>
    <Match>(^|\s+)(wstring)[*\s]*</Match>
    <Replace>System.String</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs,-retval,-out</NewAttribute>
    <NewAttrValue>UnmanagedType.LPStruct</NewAttrValue>
    <Match>(nsIXPCTest)?(ns)?DOMString</Match>
    <Replace>nsAString</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs,-retval,-out</NewAttribute>
    <NewAttrValue>UnmanagedType.LPStruct</NewAttrValue>
    <Match>(nsIXPCTestns)?(AString)</Match>
    <Replace>nsAString</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs,-retval,-out</NewAttribute>
    <NewAttrValue>UnmanagedType.LPStruct</NewAttrValue>
    <Match>ACString</Match>
    <Replace>nsAString</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs,-retval,-out</NewAttribute>
    <NewAttrValue>UnmanagedType.LPStruct</NewAttrValue>
    <Match>AUTF8String</Match>
    <Replace>nsAString</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs</NewAttribute>
    <NewAttrValue>UnmanagedType.LPStr</NewAttrValue>
    <Match>(^|\s+)(string)</Match>
    <Replace>System.String</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <NewAttribute>MarshalAs</NewAttribute>
    <NewAttrValue>UnmanagedType.BStr</NewAttrValue>
    <Match>(^|\s+)BSTR[*\s]*</Match>
    <Replace>System.String</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)buffer</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>  
  <ParamTypeConversion>
    <Match>(UnsignedCharPtr|charPtr)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>constCharPtr</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)wchar</Match>
    <Replace>System.Char</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <!-- TODO - should be converted to utf16 -->
    <Match>(^|\s+)char</Match>
    <Replace>System.Char</Replace>
  </ParamTypeConversion>
  <!-- explicit renames that start with nsI-->
  <ParamTypeConversion>
    <Match>(^|\s+)nsIPresContext</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(nsIWidget)(Ptr)?</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)nsIntRectRef</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(nsILayoutHistoryState|nsIWebGLRenderbuffernsIXPCComponents_utils_Sandbox|nsIXPCComponents_Results|nsIXPCComponents_ID|nsIXPCComponents_Exception|nsIXPCComponents_Constructor|nsIXPCComponents_ClassesByID|nsIXPCComponents_Classes|nsITestXPCSomeUselessThing|nsIScriptContext|nsIPresShell|nsIntSizePtr|nsIntRectPtr|nsIFrame|nsIDRef|nsIDPtr|(^|\s+)nsID\s|nsIContent|nsIAtomPtr|nsIWordBreaker|nsISupportsArrayEnumFunc|nsIScriptGlobalObject|nsIScriptElement|nsIRegion|nsIPluginInstanceRef|nsIDocument)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <!-- end explicit renames that start with nsI-->
  <ParamTypeConversion>
    <Match>(^|\s+)(nsSize|size_t|nsIntSize)</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <!-- Interfaces : any other type beginning with 'nsI'  -->
  <ParamTypeConversion>
    <Attribute>~size_is</Attribute>
    <NewAttribute>MarshalAs</NewAttribute>
    <NewAttrValue>UnmanagedType.Interface</NewAttrValue>
    <Match>^\s*(?&lt;type&gt;nsI[^\s]+)</Match>
    <Replace>${type}</Replace>
  </ParamTypeConversion>
  <!-- unusual stuff -->
  <ParamTypeConversion>    
    <Match>SAFEARRAY[.]*</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>VARIANT_BOOL[.]*</Match>
    <Replace>System.Boolean</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>IUnknown[.]*</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>IDispatch[.]*</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>SCODE[.]*</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>DATE[.]*</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <!-- explicit renames -->
  <ParamTypeConversion>
    <Match>(^|\s+)nsPresContext</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion> 
  <ParamTypeConversion>
    <Match>(^|\s+)(xpcex)?(JSContext)(Ptr)?</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(xpcex)?(JSVal)(Ptr)?</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(JSObject)(Ptr)?</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)DOMTimeStamp</Match>
    <Replace>System.Int64</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(ImageContainerPtr|ImagePtr)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)nsresult</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(ns)?(ref)(cnt)?</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(WebGLuint|WebGLenum|WebGLbitfield|nsLoadFlags)</Match>
    <Replace>System.UInt32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(WebGLsizeiptr|WebGLArrayPtr|WebGLArrayBufferPtr)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(WebGLsizei|WebGLint)</Match>
    <Replace>System.Int32</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(WebGLfloat|WebGLclampf)</Match>
    <Replace>System.Double</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>WebGLboolean</Match>
    <Replace>System.Boolean</Replace>
  </ParamTypeConversion>  
  <ParamTypeConversion>
    <Match>RequestHeaderTuples</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(nsXPTParamInfoPtr|nsXPTMethodInfoPtr|nsXPTConstantPtr)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>
  <ParamTypeConversion>
    <Match>(^|\s+)(ResultArray|RangeArray|triggerInfoPtr|PRLibraryPtr|PRFileDescPtr|nsWriteUnicharSegmentFun|nsWrapperCachePtr|NSWindowPtr|nsViewID|nsTimerCallbackFunc|nsScriptObjectTracerPtr|NSSCMSContentCallback|nsReadSegmentFun|nsTaskbarProgressState|nsStringRef|nsPreferencesArrayPtr|nsPreferencePtrConst|nsPreferencePtr|nsPointRef|nsPluginTagType|nsPluginNativeWindowPtr|nsPIDOMWindow|nsNonConstIDPtr|nsNativeIntMarginRef|nsDocShellEditorDataPtr|nsContentViewId|nsCIDRef|nsCIDPtr|nsCCTraversalCallbackRef|JSEqualityOp|nsAXPCNativeCallContextPtr|nsASocketHandlerPtr|NPWindowPtr|NPRectPtr|NPRegion|NPPVariable|NPPrintPtr|nativeWindow|nativeChar|jsval|JSRuntime|JSEqualityOp|JSDValue)</Match>
    <Replace>System.IntPtr</Replace>
  </ParamTypeConversion>  
</IDLConversions>
